{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Project Administrative Metadata Schema",
  "description": "Governs the project's lifecycle, access, rights, and compliance. Shared across all datasets in the project.",
  "type": "object",
  "properties": {
    "project_identifier_link": {
      "type": "string",
      "description": "Reference to the unique Project Identifier defined in the Project Descriptive Metadata schema."
    },
    "data_steward_contact_person": {
      "type": "object",
      "description": "Name, ORCID, Email of the individual responsible for managing or answering questions about this project and its datasets.",
      "properties": {
        "name": { "type": "string" },
        "orcid": { "type": "string", "format": "uri", "pattern": "^https://orcid.org/[0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{3}[0-9X]$" },
        "email": { "type": "string", "format": "email" }
      },
      "required": ["name", "email"]
    },
    "default_license": {
      "type": "string",
      "description": "Default license for datasets in this project (e.g., CC-BY 4.0, MIT, ODC-By). Can be overridden at dataset level."
    },
    "default_access_level": {
      "type": "string",
      "description": "Default access level for datasets in this project.",
      "enum": ["Public", "Embargoed", "Restricted", "Confidential"]
    },
    "default_access_conditions_contact": {
      "type": "string",
      "description": "Default instructions on how to request access, or specific conditions required for use. Required if default access level is Restricted."
    },
    "default_embargo_end_date": {
      "type": "string",
      "format": "date",
      "description": "Default embargo end date for datasets in this project. Required if default access level is Embargoed."
    },
    "project_ethics_approval_references": {
      "type": "array",
      "description": "Identifier(s) for Institutional Review Board (IRB) or Animal Care (IACUC) approvals relevant to this project.",
      "items": { "type": "string" }
    },
    "project_consent_framework_summary": {
      "type": "string",
      "description": "Description of the consent obtained from human subjects for data collection and use in this project."
    },
    "default_data_sensitivity_classification": {
      "type": "string",
      "description": "Default classification based on content for datasets in this project.",
      "enum": ["Public", "Internal Use Only", "Confidential", "PII/PHI"]
    },
    "default_anonymization_method": {
      "type": "string",
      "description": "Default description of the methods used to de-identify or anonymize the data, if applicable."
    },
    "project_data_retention_schedule": {
      "type": "string",
      "description": "Policy or date defining how long the project data will be actively managed and/or archived."
    },
    "project_citation_template": {
      "type": "string",
      "description": "The preferred format template for citing datasets from this project when used in other works."
    },
    "project_documentation_link": {
      "type": "string",
      "format": "uri",
      "description": "URI or path to essential project documentation (e.g., README file, user guide) needed to understand/use the project data."
    },
    "project_preservation_location": {
      "type": "string",
      "description": "Name or identifier of the intended long-term archive or repository for this project's datasets."
    },
    "created_by": { "type": "string", "description": "User or system that created this metadata record." },
    "created_date": { "type": "string", "format": "date-time", "description": "UTC timestamp of record creation." },
    "last_modified_by": { "type": "string", "description": "User or system that last modified this metadata record." },
    "last_modified_date": { "type": "string", "format": "date-time", "description": "UTC timestamp of last modification." }
  },
  "required": [
    "project_identifier_link",
    "created_by",
    "created_date",
    "last_modified_by",
    "last_modified_date"
  ],
  "allOf": [
    {
      "if": { "properties": { "default_access_level": { "const": "Restricted" } } },
      "then": { "required": ["default_access_conditions_contact"] }
    },
    {
      "if": { "properties": { "default_access_level": { "const": "Embargoed" } } },
      "then": { "required": ["default_embargo_end_date"] }
    },
    {
      "if": { "properties": { "default_data_sensitivity_classification": { "enum": ["Confidential", "PII/PHI"] } } },
      "then": { "required": ["default_anonymization_method"] }
    }
  ]
}
