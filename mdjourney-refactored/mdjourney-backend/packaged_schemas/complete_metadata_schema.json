{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Complete Metadata Schema (V2)",
  "description": "Complete metadata file that combines all metadata components with relationships and validation scores.",
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "description": "Version of the complete metadata format",
      "enum": ["2.0"]
    },
    "experiment_identifier": {
      "type": "string",
      "description": "Unique identifier for the experiment this complete metadata represents"
    },
    "metadata_components": {
      "type": "object",
      "description": "Container for all individual metadata components",
      "properties": {
        "project_descriptive": {
          "type": "object",
          "description": "Project descriptive metadata"
        },
        "project_administrative": {
          "type": "object",
          "description": "Project administrative metadata"
        },
        "dataset_administrative": {
          "type": "object",
          "description": "Dataset administrative metadata"
        },
        "dataset_structural": {
          "type": "object",
          "description": "Dataset structural metadata"
        },
        "experiment_contextual": {
          "type": "object",
          "description": "Experiment contextual metadata"
        }
      },
      "required": [
        "project_descriptive",
        "project_administrative",
        "dataset_administrative",
        "dataset_structural",
        "experiment_contextual"
      ]
    },
    "metadata_relationships": {
      "type": "object",
      "description": "Defines relationships between metadata components",
      "properties": {
        "project_to_dataset": {
          "type": "string",
          "description": "Relationship type between project and dataset",
          "enum": ["one_to_many", "one_to_one", "many_to_many"]
        },
        "dataset_to_experiment": {
          "type": "string",
          "description": "Relationship type between dataset and experiment",
          "enum": ["one_to_many", "one_to_one", "many_to_many"]
        },
        "experiment_to_data_files": {
          "type": "string",
          "description": "Relationship type between experiment and data files",
          "enum": ["one_to_many", "one_to_one", "many_to_many"]
        }
      },
      "required": [
        "project_to_dataset",
        "dataset_to_experiment",
        "experiment_to_data_files"
      ]
    },
    "metadata_validation": {
      "type": "object",
      "description": "Validation and quality assessment information",
      "properties": {
        "schema_compliance": {
          "type": "boolean",
          "description": "Whether all metadata components comply with their respective schemas"
        },
        "completeness_score": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0,
          "description": "Overall completeness score (0.0 to 1.0)"
        },
        "quality_score": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0,
          "description": "Overall quality score (0.0 to 1.0)"
        }
      },
      "required": [
        "schema_compliance",
        "completeness_score",
        "quality_score"
      ]
    },
    "metadata_provenance": {
      "type": "object",
      "description": "Information about the generation and modification of this metadata",
      "properties": {
        "generated_by": {
          "type": "string",
          "description": "System or tool that generated this complete metadata"
        },
        "generation_date": {
          "type": "string",
          "format": "date-time",
          "description": "When this complete metadata was generated"
        },
        "last_validation_date": {
          "type": "string",
          "format": "date-time",
          "description": "When this metadata was last validated"
        }
      },
      "required": [
        "generated_by",
        "generation_date",
        "last_validation_date"
      ]
    }
  },
  "required": [
    "version",
    "experiment_identifier",
    "metadata_components",
    "metadata_relationships",
    "metadata_validation",
    "metadata_provenance"
  ]
}
